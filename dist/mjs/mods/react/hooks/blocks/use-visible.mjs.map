{"version":3,"file":"use-visible.mjs","sources":["../../../../../../src/mods/react/hooks/blocks/use-visible.ts"],"sourcesContent":["import { useAutoRef } from \"libs/react.js\"\nimport { Handle } from \"mods/react/types/handle.js\"\nimport { useEffect } from \"react\"\n\n/**\n * Do a request when the tab is visible\n * @param handle \n */\nexport function useVisible(handle: Handle) {\n  const { ready, fetch } = handle\n\n  const fetchRef = useAutoRef(fetch)\n\n  useEffect(() => {\n    if (!ready) return\n\n    const f = () => !document.hidden && fetchRef.current()\n\n    document.addEventListener(\"visibilitychange\", f)\n    return () => document.removeEventListener(\"visibilitychange\", f)\n  }, [ready])\n}"],"names":[],"mappings":";;;AAIA;;;AAGG;AACG,SAAU,UAAU,CAAC,MAAc,EAAA;IAC/B,IAAA,KAAK,GAAY,MAAM,CAAA,KAAlB,EAAE,KAAK,GAAK,MAAM,CAAA,KAAX,CAAW;AAE/B,IAAA,IAAM,QAAQ,GAAG,UAAU,CAAC,KAAK,CAAC,CAAA;AAElC,IAAA,SAAS,CAAC,YAAA;AACR,QAAA,IAAI,CAAC,KAAK;YAAE,OAAM;AAElB,QAAA,IAAM,CAAC,GAAG,YAAM,EAAA,OAAA,CAAC,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,OAAO,EAAE,CAAA,EAAA,CAAA;AAEtD,QAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAA;AAChD,QAAA,OAAO,YAAM,EAAA,OAAA,QAAQ,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAnD,EAAmD,CAAA;AAClE,KAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAA;AACb;;;;"}