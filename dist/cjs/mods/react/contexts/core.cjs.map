{"version":3,"file":"core.cjs","sources":["../../../../../src/mods/react/contexts/core.tsx"],"sourcesContent":["import { ChildrenProps } from \"libs/react.js\"\nimport { Core } from \"mods/core.js\"\nimport { Params } from \"mods/types/params.js\"\nimport * as React from \"react\"\nimport { createContext, useContext, useEffect, useRef } from \"react\"\n\nexport const CoreContext =\n  createContext<Core | undefined>(undefined)\n\nexport function useCore() {\n  const core = useContext(CoreContext)\n  if (core === undefined)\n    throw new Error(\"Undefined core\")\n  return core\n}\n\nexport function useCoreProvider(params: Params) {\n  const coreRef = useRef<Core>()\n\n  if (coreRef.current === undefined)\n    coreRef.current = new Core(params)\n\n  useEffect(() => () => {\n    coreRef.current?.unmount()\n  }, [])\n\n  return coreRef.current\n}\n\nexport function CoreProvider(props: ChildrenProps & Params) {\n  const { children, ...params } = props\n\n  const core = useCoreProvider(params)\n\n  return <CoreContext.Provider value={core}>\n    {children}\n  </CoreContext.Provider>\n}"],"names":["createContext","useContext","useRef","Core","useEffect","__rest","React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMa,WAAW,GACtBA,mBAAa,CAAmB,SAAS,EAAC;SAE5B,OAAO,GAAA;AACrB,IAAA,IAAM,IAAI,GAAGC,gBAAU,CAAC,WAAW,CAAC,CAAA;IACpC,IAAI,IAAI,KAAK,SAAS;AACpB,QAAA,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAA;AACnC,IAAA,OAAO,IAAI,CAAA;AACb,CAAC;AAEK,SAAU,eAAe,CAAC,MAAc,EAAA;AAC5C,IAAA,IAAM,OAAO,GAAGC,YAAM,EAAQ,CAAA;AAE9B,IAAA,IAAI,OAAO,CAAC,OAAO,KAAK,SAAS;QAC/B,OAAO,CAAC,OAAO,GAAG,IAAIC,SAAI,CAAC,MAAM,CAAC,CAAA;IAEpCC,eAAS,CAAC,cAAM,OAAA,YAAA;;AACd,QAAA,CAAA,EAAA,GAAA,OAAO,CAAC,OAAO,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,OAAO,EAAE,CAAA;AAC5B,KAAC,CAFe,EAEf,EAAE,EAAE,CAAC,CAAA;IAEN,OAAO,OAAO,CAAC,OAAO,CAAA;AACxB,CAAC;AAEK,SAAU,YAAY,CAAC,KAA6B,EAAA;IAChD,IAAA,QAAQ,GAAgB,KAAK,CAArB,QAAA,EAAK,MAAM,GAAAC,YAAA,CAAK,KAAK,EAA/B,CAAuB,UAAA,CAAA,CAAF,CAAU;AAErC,IAAA,IAAM,IAAI,GAAG,eAAe,CAAC,MAAM,CAAC,CAAA;IAEpC,OAAOC,gBAAA,CAAA,aAAA,CAAC,WAAW,CAAC,QAAQ,EAAA,EAAC,KAAK,EAAE,IAAI,EAAA,EACrC,QAAQ,CACY,CAAA;AACzB;;;;;;;"}